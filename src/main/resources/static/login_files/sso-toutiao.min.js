!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.ResFallback=n():e.ResFallback=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=8)}([function(e,n){n.toArr=function(e){for(var n=[],t=0,r=e.length;t<r;t++)n.push(e[t]);return n},n.getRes=function(){return{js:n.toArr(document.getElementsByTagName("script")).map(function(e){return{url:e.getAttribute("src"),fullUrl:e.src,ele:e}}),css:n.filter(n.toArr(document.getElementsByTagName("link")),function(e){return"stylesheet"===e.rel}).map(function(e){return{url:e.getAttribute("href"),fullUrl:e.href,ele:e}})}},function(){var e;n.getResOnce=function(){return e||(e=n.getRes()),e}}(),n.filterNull=function(e){return n.filter(e,function(e){return e})},n.forEach=function(e,n){for(var t=0,r=e.length;t<r;t++)n(e[t],t,e)},n.isNullOrUndefined=function(e){return void 0===e||null===e},n.find=function(e,n,t){for(var r,u=[],o=0,i=e.length;o<i&&(r=e[o],!n(r)||(u.push({index:o,value:r}),!t));o++);return t&&(u=u[0]),u},n.filter=function(e,t,r){var u=[];return n.forEach(e,function(e){t.apply(r,arguments)&&u.push(e)}),u}},function(e,n,t){e.exports=t(5)},function(e,n,t){var r=t(3),u=t(4);n.catchSyncFactory=function(e){return u.resCatch.isSupport?u.resSyncCatch:r}},function(e,n,t){var r=t(0),u=r.getResOnce,o=r.filterNull,i=r.forEach,c=r.filter;e.exports=function(e,n){function t(e,n,t){var r=new XMLHttpRequest;r.open("HEAD",e.url,!1),r.onreadystatechange=function(){if(this.readyState===this.DONE){var r=this.status;n(e,-1===[404,503,504].indexOf(r),t)}},r.send()}function r(n){return c(n,function(n){return n.fullUrl&&e(n.url)})}var s=u();s.css=r(s.css),s.js=r(s.js);var f=s.css.length,l=s.js.length,a=f+l,p={css:[],js:[]},d=0,h=function(e,t,r,u){r||(p[e][u]=t),++d===a&&(p.css=o(p.css),p.js=o(p.js),n(p.css,p.js))},v=h.bind(null,"js"),y=h.bind(null,"css");i(s.css,function(e,n){t(e,y,n)}),i(s.js,function(e,n){t(e,v,n)})}},function(e,n,t){var r=t(0),u=r.getResOnce,o=r.filter,i=window.performance,c=n.resCatch=function(e){function n(n){return o(n,function(n){return n.fullUrl&&-1===r.indexOf(n.fullUrl)&&e(n.url)})}var t=u(),r=o(i.getEntriesByType("resource"),function(e){var n=e.name,t=n.split("?")[0];return-1!==["script","link"].indexOf(e.initiatorType)&&[/\.css$/,/\.js$/].some(function(e){return e.test(t)})}).map(function(e){return e.name});return{css:n(t.css),js:n(t.js)}};c.isSupport=function(){var e=window.navigator.userAgent,n=!/MSIE/.test(e);if(n)try{var t=e.match(/Chrome\/([\d]+)/);t&&+t[1]<45&&(n=!1)}catch(e){}return i&&i.getEntriesByType&&n}(),n.resSyncCatch=function(e,n){var t=c(e);n(t.css,t.js)}},function(e,n,t){var r=t(0),u=r.getResOnce,o=r.forEach,i=r.find,c=r.filter,s=r.isNullOrUndefined,f=t(6),l=t(2),a=l.catchSyncFactory,p={ALL_IN_FILES:0,ALL:1,ONLY:2},d=function(e){function n(e,n){return L&&L.some(function(t){return"string"==typeof t?e===t:"function"==typeof t?t(e,n):t instanceof RegExp&&t.test(e)})}function t(e){if(n(e))return!1;var t=l(e,E);return t?(x&&(t=x.some(function(n){return"object"==typeof n&&n.url&&(n=n.url),n instanceof RegExp?n.test(e):e===n})),t):t}function r(e,n,t){return e.replace(n,t)}function l(e,n){if(n instanceof RegExp)t=n;else var t=new RegExp("^"+n);return t.test(e)}function d(e){var n=x&&i(x,function(n){return"string"==typeof n?n===e:n.url===e},!0),t=n&&n.value,r=n&&n.index,u=t&&void 0!==t.jsRetryMode?t.jsRetryMode:w;if(u.length)return u;u!==p.ALL_IN_FILES||x||(u=p.ALL);switch(u){case p.ALL_IN_FILES:return n?x.slice(r+1).map(function(e){return"string"==typeof e?e:e.url}):null;case p.ALL:return n=i(R,function(n){return n.url===e},!0),n?R.slice(n.index+1).map(function(e){return e.url||e.ele}):null;case p.ONLY:default:return null}}function h(e,n){var t={urlOrEle:e,children:[],parent:n,level:(n.level||0)+1};return n.children.push(t),t}function v(e,n,t){if(e!==t){t=t||e;var r=n-e.level;e.level=n,o(e.children,function(e){v(e,e+r,t)})}}function y(e,n){var t=i(_,function(n){return n.urlOrEle===e},!0);return t=t&&t.value,t&&t.level<n&&v(t,n),t}function g(e,n,t){var r=y(e,t);if(r)return r;if(r=h(e,n),_.push(r),1===t){var u=d(e);if(u){var i=r;o(u,function(e){i=g(e,i,i.level+1)})}}return r}function m(){}if(!window.__RESFALLBACK__){window.__RESFALLBACK__=!0;var E=e.main,j=e.secondary,L=e.ignores,x=e.files,w=s(e.jsRetryMode)?p.ALL_IN_FILES:e.jsRetryMode,b={children:[]},_=[],R=c(u().js,function(e){return!n(e.url,e.ele)});a()(t,function(e,n){var t=f.createQueue("css");o(e,function(e){t.create(r(e.url,E,j),"css",e.ele,m)}),t.load(),o(n,function(e){g(e.url,b,1)});for(var u,i=[b],c=[];i.length;)u=i.shift(),u.urlOrEle&&c.push(u),o(u.children,function(e){i.push(e)});c.sort(function(e,n){return e.level-n.level});var s=f.createQueue("js");o(c,function(e){var n=e.urlOrEle;s.create("string"==typeof n?r(n,E,j):n,"js",null,m)}),s.load()})}};d.jsRetryModeEnum=p,e.exports=d},function(e,n,t){var r=t(0);n.createQueue=function(e){var t=[];return{push:n.pushToQueue.bind(this,t),load:n.loadQueue.bind(this,t,e),create:function(e,t,r,u,o){var i=n.createEle(e,t,u,o);this.push(i,r)}}},n.createEle=function(e,n,t,u){var o="css"===n?"link":"script",i=document.createElement(o);return"string"==typeof e?(i.onload=function(){t&&t(e,!0,u)},i.onerror=function(){t&&t(e,!1,u)},"link"===o?(i.rel="stylesheet",i.href=e):"script"===o&&(i.src=e)):(r.forEach(e.attributes,function(e){i.setAttribute(e.name,e.value)}),i.text=e.text),i},n.pushToQueue=function(e,n,t){e.push({ele:n,pos:t})},n.loadQueue=function(e,n){if(e.length)if("css"===n)r.forEach(e,function(e){e.pos.parentNode.insertBefore(e.ele,e.pos)});else{var t=e.map(function(e){return e.ele.outerHTML}).join("");document.write(t)}}},,function(e,n,t){new(t(1))({main:/^\/\/\w+\.pstatp\.com\/toutiao\/resource\/ntoutiao_web/,secondary:"//www.toutiao.com/static/v8/resource/resource/ntoutiao_web",ignores:[function(e,n){return e&&!/^\/\/\w+\.pstatp\.com\/toutiao\/resource\/ntoutiao_web/.test(e)}]})}])});